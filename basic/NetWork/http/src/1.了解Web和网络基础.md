#了解Web和网络基础
> 概述web建立在何种技术之上

# 1.1 使用http协议访问Web

### http1.0 
   
### http1.1

### http2.0    

# 1.2 使用tcp／ip传输数据

### 一.tcp协议
        计算机要通讯，双方必须采用相同的方法。对这些方法都需
        要事先规定，比如，如何探测到目标，由谁先发起通信，使
        用什么语言进行通讯，怎么结束等.
***
##### 1.tcp连接的特点：
> ##### 1.1 tcp和udp的区别
| |tcp|udp|
|:---:|:---:|:---|
|是否连接|面向连接|非连接|
|传输可靠性|可靠|不可靠|
|应用|传输大量数据，对安全要求高|传输少量数据，要求瞬时，无安全要求|
|速度|慢|快|
|最小长度|20B|8B|

> ##### 1.2 tcp的特点
   *  TCP是面向连接的传输层协议。
   *  TCP连接是端对端的（套接字–IP:Port到套接字）。
   *  TCP提供可靠交付的服务。
   *  TCP提供全双工通信。
   *  面向字节流。
***
> ##### 1.3 三次握手：
![三次握手](h       ttps://github.com/pharos47/http-protocol/blob/master/http/picture/1.png) 

    tcp协议使用三次握手的原因：阻止历史的重复连接初始化造成的混乱问题。如果通信双方的通信次数只有两次，那么发送方一旦发出建立连接的请求
    之后它就没有办法撤回这一次请求，如果在网络状况复杂或者较差的网络中，发送方连续发送多次建立连接的请求，如果 TCP 建立连接只能通信两次，
    那么接收方只能选择接受或者拒绝发送方发起的请求，它并不清楚这一次请求是不是由于网络拥堵而早早过期的连接。
 **简单来说，因为接收方不知道是因为网络拥堵还是已经过期,就将是否建立连接的权力保持在发送方手中**
 * 如果当前连接是历史连接，即 SEQ 过期或者超时，那么发送方就会直接发送 RST 控制消息中止这一次连接；
 * 如果当前连接不是历史连接，那么发送方就会发送 ACK 控制消息，通信双方就会成功建立连接;
 
 ***
 
> ##### 1.4 四次挥手:
    由于TCP连接是全双工的，因此每个方向都必须单独进行关闭。
![四次挥手](https://github.com/pharos47/http-protocol/blob/master/http/picture/tcp_finish.jpg)
> ##### close-wait:
    为了防止服务器正在发送数据时关闭连接
> ##### time-wait:
    主动等待2msl（1msl建议时间为2min），表示一个数据包在互联网中可以存在的最长时间，由tcp实现，超时被丢失。是为了保证连接正常断开，以
    及数据包的正常过期。
> ##### 流量控制:
    采用滑动窗口协议。由接收端控制发送端的数据传输。
    
    当接收端可接收为0时，发送方停止发送。同时，发送方自身保持一个定时器，到期后，发送方发送一个ZWP(zero window probe)包询问接收方是否
    可以发送，之后，接收方发送新的窗口值。如果尝试三次都接收ZWP为0，发送方RST置位。
***    
> ##### ARQ:
    每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。
***
> ##### 拥塞控制:
    客户端维护一个拥塞窗口，大小为接收min{发送窗口，接收窗口}。
    拥塞控制采用了 慢启动，拥塞避免，快重传，快恢复四种算法。
***
* 慢启动： 慢开始算法的思路是当主机开始发送数据时，如果立即把大量数据字节注入到网络，那么可能会引起网络阻塞，因为现在还不知道网络的符合情
况。经验表明，较好的方法是先探测一下，即由小到大逐渐增大发送窗口，也就是由小到大逐渐增大拥塞窗口数值。cwnd初始值为1，每经过一个传播轮次，
cwnd加倍。
***
* 拥塞避免：当发送方发送丢失时，将cwnd设置为1，慢启动阀值设置为cwnd的一半，再进行慢启动算法。
***
* 快重传和快恢复: 发送方连续收到三个一样的seq，发送方重新发送数据包。
                
                    在 TCP/IP 中，快速重传和恢复（fast retransmit and recovery，FRR）是一种拥塞控制算法，它能快速恢复丢失的数据
                    包。没有 FRR，如果数据包丢失了，TCP 将会使用定时器来要求传输暂停。在暂停的这段时间内，没有新的或复制的数据包被发
                    送。有了 FRR，如果接收机接收到一个不按顺序的数据段，它会立即给发送机发送一个重复确认。如果发送机接收到三个重复确认
                    ，它会假定确认件指出的数据段丢失了，并立即重传这些丢失的数据段。有了 FRR，就不会因为重传时要求的暂停被耽误。 　当
                    有单独的数据包丢失时，快速重传和恢复（FRR）能最有效地工作。当有多个数据信息包在某一段很短的时间内丢失时，它则不能
                    很有效地工作。

***

### 二.ip协议(待补充)

*** 

### 三.tcp/ip协议簇中的常见协议
    把和互联网相关的协议集合总成为tcp／ip协议簇。
***
##### 1.ICMP:报文控制协议
***
##### 2.DNS:域名解析协议
    域名解析的过程：
    <1>.在浏览器缓存和系统缓存中查找目的IP
    <2>.在路由器缓存表中查找目的IP
    <3>.请求本地域名服务器来解析，然后跳转到根域名服务器，根域名服务器返回给本地域名服务器一个查询域的祝域名服务器
    <4>.本地域名服务器再向返回的主域名服务器发送请求
    <5>.主域名服务器查找目的主机所在域名服务器，目的域名服务器返回IP给本地服务器
    <6>.本地域名服务器缓存
    <7>.本地域名服务器返回给本主机目的IP
***
##### 3.ARP:根据IP地址查找MAC地址
    每台主机和路由器都有自己的ARP缓存表，发送数据需要目的主机的MAC地址时，会有以下的过程。
    首先，查看本地有无对应MAC，若没有，本地主机会在本网络内向所有主机询问该IP地址对应的MAC地址，查找到后，该MAC地址就在本地主机进行更新。
 
    
    ARP协议采用老化机制，某一映射长时间没有使用，过期后被删除。
    
    
***
##### 4.HTTP
***
##### 5.UDP
***
##### 6.FTP
***
##### 7.DHCP:动态路由分配协议
***
##### 8.OSPF:开放式最短路优先算法
***
##### 9.NAT:地址转换协议
***
### 四.tcp/ip的分层管理
##### 1.分层管理的优势：
    如果不进行分层，某个地方需要改变设计时，需要对整个体系进行修改。分层管理后，只需要将对应层和其他层与之交互的接口改变就可。

##### 2.分类：
* OSI：
 
        自上到下：应用层，表示层，会话层，传输层，网络层，数据链路层，物理层。
 
* TCP／IP：
 
        自上而到：应用层，传输层，网络层，物理链路层。

![net System](https://github.com/pharos47/http-protocol/blob/master/http/picture/%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.png)

### 五.在浏览器输入一个网址到浏览器显示信息的过程
    <1>DNS解析
    <2>TCP连接
    <3>发送HTTP请求
    <4>服务器处理请求并返回HTTP报文
    <5>浏览器解析渲染页面
    <6>断开连接
 
 