# 链路层

# 3.1 引言

链路层的目的是为IP模块发送和接受IP数据报，并且可以携带一些IP的辅助协议（ARP）。TCP/IP支持不同的链路层实现，比如无线局域网，优先局域网，以太网等。

在描述链路层的PDU时，使用帧以区分更高层的PDU（分组和段）。帧的范围在几个字节到几千字节。这个范围的最大值称为MTU。

# 3.2 以太网和IEEE802 局域网标准

以太网是一种计算机局域网技术。IEEE组织的IEEE 802.3标准制定了以太网的技术标准，它规定了包括物理层的连线、电子信号和介质访问层协议的内容。以太网是目前应用最普遍的局域网技术，取代了其他局域网技术如令牌环、FDDI和ARCNET。

在线路共享的以太网中，由于多个站共享一个网络，因此常常会出现冲突控制，这种特定方法称为CSMA/CD，载波监听冲突检测多路访问，它协调了哪些计算机可以访问共享介质，同事不需要其他特殊协议。

CSMA/CD的实现是：一个站点首先检测目前网络上正在发送的信号，并在空闲时发送自己的帧。如果其他站碰巧同时发送，发生重叠的电信号就是一次碰撞。在这种情况下，每个站等待一个随机事件，然后再次尝试发送。
这个时间量的选择依据一个概率分布，随后，每一次碰撞，时间都会加倍。最终，每个站都会得到发送，或者尝试一定次数（以太网一般为16）后超时。采用CSMA/CD,
在任何时间内，网络都只能有一个帧处于传输。

而现在，基于星型结构的拓扑结构，每个站之间的线路不共享，通过交换机来实现。一个交换机有多个端口，大多数情况下，交换机采用全双工方式运行，并且不需要CSMA/CD。另外，通过交换机端口还可以实现更大范围的以太网。

当前最流行的技术之一是无线网络，常见的无线网络IEEE标准称为WI-FI，也就是802.11。

### 3.2.1 以太网帧格式

以太网帧包括七个字节的前导和一个字节的SFD。另外，还有6个字节的源地址和6个字节的目的地址。源地址字段后面还有2字节的长度或者类型字段，常见值包括IPV4（0x0800），IPV6（0x86DD），ARP（0x0806）。

一个以太网帧的基本长度为1518字节，可以扩充到2000字节。有效负载最大为1500字节。

### 3.2.2 帧校验序列/CRC

以太网帧格式后有4字节的FCS用来校验数据正确性，不匹配的情况下数据帧会被丢弃。

### 3.2.3 帧的大小

以太网帧有最大和最小尺寸，最小为64字节，并且要求数据区最小为48字节。当有效负载不够48字节时，填充字节（值为0的字节）以达到48字节。

传统以太网的最大帧为1518字节。选择1518字节主要是考虑到如果出现错误，只需要重发1.5KB就可以修复该问题。

# 3.3 网桥和交换机








